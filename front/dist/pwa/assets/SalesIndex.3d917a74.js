import{_ as P,P as U,Q as p,a0 as h,T as e,S as a,aF as k,a2 as V,V as o,aD as f,aB as n,aC as r,U as u,a1 as y,W as m,Z as Q,R as E,X as C,at as v}from"./index.0fe33fcb.js";import{Q as _}from"./QSpace.38c0a469.js";import{a as I,d as S,e as g}from"./format.3e05a736.js";import{Q as w}from"./QList.e110f46f.js";import{Q as D}from"./QPage.042eac51.js";import{Q as x}from"./QSelect.d2147d0b.js";import{P as L}from"./ProductCard.c5d82963.js";import{I as N}from"./Imprimir.fe92267a.js";import"./QChip.84d6d42b.js";import"./QImg.bde6c0cc.js";import"./index.aa4d44c1.js";const q={components:{ProductCard:L},data(){return{cantidad:1,cantidad2:1,refrescoSelect:"",polloSelect:"",pollosSelect:["PIERNA","MUSLO","PECHUGA","ALA","otros"],refresco:"",pollo:"",refrescoSelects:["PEPSI","COCA COLA","FANTA","SPRITE","7UP","MIRINDA","GUARANA","JUGO","AGUA","otros"],cantidades:[],search:"",products:[],categories:[],productsAll:[],client:{ci:"",name:""},recibido:"",saleDialog:!1,loading:!1}},created(){for(let s=0;s<=100;s++)this.cantidades.push(s);this.getProducts(),this.getCategories()},methods:{colocarPollo(){this.pollo==null&&(this.pollo=""),this.pollo=this.pollo+" "+this.cantidad+" "+this.polloSelect+",",this.pollo=this.pollo.trim()},colocarRefresco(){this.refresco==null&&(this.refresco=""),this.refresco=this.refresco+" "+this.cantidad+" "+this.refrescoSelect+",",this.refresco=this.refresco.trim()},salePost(){var s;this.loading=!0,this.$axios.post("sales",{client:this.client,products:this.$store.orders,mesa:this.client.mesa,llamada:this.client.llamada,pago:this.client.pago,comment:(this.client.comment==null?"":(s=this.client)==null?void 0:s.comment)+(this.refresco!=""?" Refresco: "+this.refresco:"")+(this.pollo!=""?" Pollo: "+this.pollo:"")}).then(t=>{this.$store.orders=[],this.saleDialog=!1,this.$alert.success("Venta realizada"),N.recibo(t.data)}).catch(t=>{this.$alert.error("Error al realizar la venta")}).finally(()=>{this.loading=!1})},textUpperCase(){this.client.name=this.client.name.toUpperCase()},searchClient(){if(console.log(this.client.ci),this.client.ci===""||this.client.ci===0||this.client.ci===null)return this.client.name="SN",!1;this.client.ci!=null&&this.$axios.get(`searchClient/${this.client.ci}`).then(s=>{var t;this.client.name=(t=s.data)==null?void 0:t.name})},pay(){if(this.$store.orders.length===0)return this.$alert.error("Debe agregar productos al carrito"),!1;this.recibido="",this.saleDialog=!0,this.cantidad=1,this.cantidad1=1,this.refresco="",this.pollo="",this.client={ci:0,name:"SN",mesa:"MESA",pago:"EFECTIVO",llamada:0}},categoryClick(s){s.id===""?this.products=this.productsAll:this.products=this.productsAll.filter(t=>t.category_id===s.id)},productClick(s){const t=this.$store.orders.find(b=>b.id===s.id);t?t.cantidadSale+=1:this.$store.orders.push({id:s.id,name:s.name,price:s.price,cantidadSale:1})},getCategories(){this.$axios.get("categories").then(s=>{this.categories=s.data})},getProducts(){this.loading=!0,this.$axios.get("listproducts").then(s=>{this.products=s.data,this.productsAll=s.data}).finally(()=>{this.loading=!1})},productFilter(s){s===""?this.products=this.productsAll:this.products=this.productsAll.filter(t=>t.name.toLowerCase().includes(s.toLowerCase()))}},computed:{categoryMoreAll(){return[{id:"",name:"Todo",icon:"fa-solid fa-globe"},...this.categories]}}},F={class:"row"},R={class:"col-12 col-md-8"},T={class:"row"},B={class:"col-12 col-md-4"},O=o("div",{class:"col-12 col-md-2"},null,-1),M=o("div",{class:"col-12 col-md-6 text-right"},null,-1),z={class:"col-12"},G={class:"col-12 col-md-4"},J=o("div",{class:"text-subtitle1 text-bold text-black"}," Carrito ",-1),Y={class:"row"},H={class:"col-12"},W={class:"row"},X={class:"col-6"},Z={class:"col-6"},j={class:"col-12"},K=o("div",{class:"text-bold text-black"}," Total ",-1),$={class:"text-bold text-h5 text-red"},ee={class:"col-12"},le=o("div",{class:"text-h6 text-bold"}," Pago ",-1),te={class:"text-bold text-center"},oe={class:"row"},se={class:"col-12 col-md-4 text-red text-subtitle1 text-bold"},ie={class:"col-12 col-md-4"},ae={class:"col-12 col-md-4 text-blue text-subtitle1 text-bold"},de={key:0},ce={class:"row"},ne={class:"col-12 col-md-2 q-pa-xs"},re={class:"col-12 col-md-3 q-pa-xs"},ue={class:"col-12 col-md-2 q-pa-xs"},me={class:"col-12 col-md-3 q-pa-xs"},pe={class:"col-12 col-md-2 q-pa-xs"},he={class:"col-12 col-md-12 q-pa-xs"},fe={class:"col-12 col-md-12 flex flex-center"},_e=o("div",{id:"myelement",class:"hidden"},null,-1);function ge(s,t,b,xe,i,c){const A=U("ProductCard");return p(),h(V,null,[e(D,{class:"bg-grey-3 q-pa-xs"},{default:a(()=>[e(f,null,{default:a(()=>[e(n,{class:"q-pa-xs"},{default:a(()=>[o("div",F,[o("div",R,[o("div",T,[o("div",B,[e(r,{modelValue:i.search,"onUpdate:modelValue":[t[0]||(t[0]=l=>i.search=l),c.productFilter],label:"Buscar",outlined:"",dense:"",clearable:"",loading:i.loading},null,8,["modelValue","onUpdate:modelValue","loading"])]),O,M,o("div",z,[e(A,{products:i.products,categories:c.categoryMoreAll,onProductClick:c.productClick,onCategoryClick:c.categoryClick},null,8,["products","categories","onProductClick","onCategoryClick"])])])]),o("div",G,[e(f,null,{default:a(()=>[e(n,{class:"q-pa-xs row items-center bg-yellow"},{default:a(()=>[J,e(_),e(u,{color:"red",label:"Limpiar Carrito",dense:"","no-caps":"",class:"text-bold",size:"10px",icon:"o_delete",onClick:t[1]||(t[1]=l=>s.$store.orders=[]),loading:i.loading},null,8,["loading"])]),_:1}),e(n,{class:"q-pa-xs"},{default:a(()=>[o("div",Y,[o("div",H,[e(w,{bordered:"",dense:""},{default:a(()=>[(p(!0),h(V,null,y(s.$store.orders,l=>(p(),E(I,{key:l.id},{default:a(()=>[e(S,null,{default:a(()=>[e(g,{class:"text-bold"},{default:a(()=>[C(m(l.name),1)]),_:2},1024),e(g,{caption:""},{default:a(()=>[o("div",W,[o("div",X,[e(r,{modelValue:l.price,"onUpdate:modelValue":d=>l.price=d,dense:"",outlined:"",type:"number",step:"0.01"},{prepend:a(()=>[e(v,{name:"fa-solid fa-dollar-sign",size:"10px"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),o("div",Z,[e(r,{modelValue:l.cantidadSale,"onUpdate:modelValue":d=>l.cantidadSale=d,dense:"",outlined:"",type:"number"},{prepend:a(()=>[e(v,{name:"fa-solid fa-shopping-cart",size:"10px"})]),_:2},1032,["modelValue","onUpdate:modelValue"])])])]),_:2},1024)]),_:2},1024),e(S,{class:"text-right",side:""},{default:a(()=>[e(g,{class:"text-red text-bold text-h6"},{default:a(()=>[C(m((l.price*l.cantidadSale).toFixed(2))+" ",1),e(u,{dense:"",flat:"",rounded:"",icon:"delete",size:"10px",color:"red",onClick:d=>s.$store.orders.splice(s.$store.orders.indexOf(l),1)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),o("div",j,[e(n,{class:"q-pa-xs row items-center"},{default:a(()=>[K,e(_),o("div",$,m(s.$store.orders.reduce((l,d)=>l+d.price*d.cantidadSale,0).toFixed(2))+" Bs ",1)]),_:1})]),o("div",ee,[e(n,{class:"q-pa-xs"},{default:a(()=>[e(u,{color:"indigo",label:"Pagar",dense:"","no-caps":"",class:"full-width text-bold",size:"lg",icon:"shopping_cart",onClick:c.pay,loading:i.loading},null,8,["onClick","loading"])]),_:1})])])]),_:1})]),_:1})])])]),_:1})]),_:1})]),_:1}),e(k,{modelValue:i.saleDialog,"onUpdate:modelValue":t[10]||(t[10]=l=>i.saleDialog=l),persistent:""},{default:a(()=>[e(f,{style:{width:"850px","max-width":"90vh"}},{default:a(()=>[e(n,{class:"q-pa-xs row items-center"},{default:a(()=>[le,e(_),e(u,{flat:"",dense:"",icon:"close",onClick:t[2]||(t[2]=l=>i.saleDialog=!1)})]),_:1}),e(n,{class:""},{default:a(()=>[o("div",te,[o("div",oe,[o("div",se," Total :"+m(s.$store.orders.reduce((l,d)=>l+d.price*d.cantidadSale,0).toFixed(2))+" Bs ",1),o("div",ie,[e(r,{modelValue:i.recibido,"onUpdate:modelValue":t[3]||(t[3]=l=>i.recibido=l),label:"Monto recibido",outlined:"",dense:"",clearable:""},null,8,["modelValue"])]),o("div",ae,[i.recibido!==""?(p(),h("div",de," Cambio :"+m((i.recibido-s.$store.orders.reduce((l,d)=>l+d.price*d.cantidadSale,0)).toFixed(2))+" Bs ",1)):Q("",!0)])])])]),_:1}),e(n,null,{default:a(()=>[o("div",ce,[o("div",ne,[e(r,{modelValue:i.client.ci,"onUpdate:modelValue":[t[4]||(t[4]=l=>i.client.ci=l),c.searchClient],label:"Numero",outlined:"",dense:"",clearable:"",debounce:"300"},null,8,["modelValue","onUpdate:modelValue"])]),o("div",re,[e(r,{modelValue:i.client.name,"onUpdate:modelValue":[t[5]||(t[5]=l=>i.client.name=l),c.textUpperCase],label:"Nombre",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"])]),o("div",ue,[e(x,{modelValue:i.client.mesa,"onUpdate:modelValue":t[6]||(t[6]=l=>i.client.mesa=l),label:"Mesa",outlined:"",dense:"",options:["MESA","LLEVAR","DELIVERY","PEDIDOS YA"]},null,8,["modelValue"])]),o("div",me,[e(x,{modelValue:i.client.pago,"onUpdate:modelValue":t[7]||(t[7]=l=>i.client.pago=l),label:"Pago",outlined:"",dense:"",options:["EFECTIVO","TARJETA","ONLINE","QR"]},null,8,["modelValue"])]),o("div",pe,[e(x,{modelValue:i.client.llamada,"onUpdate:modelValue":t[8]||(t[8]=l=>i.client.llamada=l),label:"Llamada",outlined:"",dense:"",options:i.cantidades,rules:[l=>l>0||"Debe seleccionar una cantidad"]},null,8,["modelValue","options","rules"])]),o("div",he,[e(r,{modelValue:i.client.comment,"onUpdate:modelValue":t[9]||(t[9]=l=>i.client.comment=l),label:"Comentario",outlined:"",dense:""},null,8,["modelValue"])]),o("div",fe,[e(u,{color:"red-8",label:"Pagar",dense:"","no-caps":"",class:"text-bold full-width",icon:"shopping_cart",onClick:c.salePost,loading:i.loading},null,8,["onClick","loading"])])])]),_:1})]),_:1})]),_:1},8,["modelValue"]),_e],64)}var Ee=P(q,[["render",ge]]);export{Ee as default};
