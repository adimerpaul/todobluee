import{c as te,B as oe,ac as ae,E as ne,r as O,a as m,ad as se,G as ie,ae as re,H as le,af as ue,w as k,o as C,z as x,s as _,aj as ce,h as q,al as de,g as fe,d as he,A as ve,m as me,a_ as ge,a$ as pe,a7 as ye}from"./index.0201c8ba.js";import{u as Te,v as H,f as Pe,p as L,g as be,h as Se,r as A,s as we,c as D,i as Ee}from"./format.6ac589cc.js";var Ce=te({name:"QTooltip",inheritAttrs:!1,props:{...Te,...oe,...ae,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:H},self:{type:String,default:"top middle",validator:H},offset:{type:Array,default:()=>[14,14],validator:Pe},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...ne],setup(e,{slots:o,emit:a,attrs:i}){let r,u;const g=fe(),{proxy:{$q:n}}=g,c=O(null),h=O(!1),j=m(()=>L(e.anchor,n.lang.rtl)),K=m(()=>L(e.self,n.lang.rtl)),N=m(()=>e.persistent!==!0),{registerTick:B,removeTick:Q}=se(),{registerTimeout:v}=ie(),{transitionProps:W,transitionStyle:I}=re(e),{localScrollTarget:T,changeScrollEvent:R,unconfigureScrollTarget:U}=be(e,w),{anchorEl:s,canShow:$,anchorEvents:d}=Se({showing:h,configureAnchorEl:Y}),{show:z,hide:p}=le({showing:h,canShow:$,handleShow:V,handleHide:F,hideOnRouteChange:N,processOnMount:!0});Object.assign(d,{delayShow:J,delayHide:X});const{showPortal:P,hidePortal:b,renderPortal:G}=ue(g,c,ee,"tooltip");if(n.platform.is.mobile===!0){const t={anchorEl:s,innerRef:c,onClickOutside(l){return p(l),l.target.classList.contains("q-dialog__backdrop")&&ve(l),!0}},y=m(()=>e.modelValue===null&&e.persistent!==!0&&h.value===!0);k(y,l=>{(l===!0?Ee:A)(t)}),C(()=>{A(t)})}function V(t){P(),B(()=>{u=new MutationObserver(()=>f()),u.observe(c.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),f(),w()}),r===void 0&&(r=k(()=>n.screen.width+"|"+n.screen.height+"|"+e.self+"|"+e.anchor+"|"+n.lang.rtl,f)),v(()=>{P(!0),a("show",t)},e.transitionDuration)}function F(t){Q(),b(),S(),v(()=>{b(!0),a("hide",t)},e.transitionDuration)}function S(){u!==void 0&&(u.disconnect(),u=void 0),r!==void 0&&(r(),r=void 0),U(),x(d,"tooltipTemp")}function f(){we({targetEl:c.value,offset:e.offset,anchorEl:s.value,anchorOrigin:j.value,selfOrigin:K.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function J(t){if(n.platform.is.mobile===!0){D(),document.body.classList.add("non-selectable");const y=s.value,l=["touchmove","touchcancel","touchend","click"].map(E=>[y,E,"delayHide","passiveCapture"]);_(d,"tooltipTemp",l)}v(()=>{z(t)},e.delay)}function X(t){n.platform.is.mobile===!0&&(x(d,"tooltipTemp"),D(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),v(()=>{p(t)},e.hideDelay)}function Y(){if(e.noParentEvent===!0||s.value===null)return;const t=n.platform.is.mobile===!0?[[s.value,"touchstart","delayShow","passive"]]:[[s.value,"mouseenter","delayShow","passive"],[s.value,"mouseleave","delayHide","passive"]];_(d,"anchor",t)}function w(){if(s.value!==null||e.scrollTarget!==void 0){T.value=ce(s.value,e.scrollTarget);const t=e.noParentEvent===!0?f:p;R(T.value,t)}}function Z(){return h.value===!0?q("div",{...i,ref:c,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",i.class],style:[i.style,I.value],role:"tooltip"},he(o.default)):null}function ee(){return q(de,W.value,Z)}return C(S),Object.assign(g.proxy,{updatePosition:f}),G}});function M(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const o=parseInt(e,10);return isNaN(o)?0:o}var xe=me({name:"close-popup",beforeMount(e,{value:o}){const a={depth:M(o),handler(i){a.depth!==0&&setTimeout(()=>{const r=ge(e);r!==void 0&&pe(r,i,a.depth)})},handlerKey(i){ye(i,13)===!0&&a.handler(i)}};e.__qclosepopup=a,e.addEventListener("click",a.handler),e.addEventListener("keyup",a.handlerKey)},updated(e,{value:o,oldValue:a}){o!==a&&(e.__qclosepopup.depth=M(o))},beforeUnmount(e){const o=e.__qclosepopup;e.removeEventListener("click",o.handler),e.removeEventListener("keyup",o.handlerKey),delete e.__qclosepopup}});export{xe as C,Ce as Q};
