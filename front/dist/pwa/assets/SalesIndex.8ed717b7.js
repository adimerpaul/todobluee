import{_ as P,P as A,Q as h,a0 as f,T as l,S as d,aF as k,a2 as x,V as t,aD as _,aB as r,aC as c,U as u,a1 as w,W as p,Z as y,R as Q,X as C,at as v}from"./index.0201c8ba.js";import{Q as g}from"./QSpace.93af7937.js";import{a as E,d as S,e as V}from"./format.6ac589cc.js";import{Q as I}from"./QList.c138df6e.js";import{Q as D}from"./QPage.23f53c4a.js";import{Q as m}from"./QSelect.9a427e5e.js";import{P as L}from"./ProductCard.2bd736e2.js";import{I as N}from"./Imprimir.7fb5e28a.js";import"./QChip.2539c24b.js";import"./QImg.8678b71c.js";import"./index.aa4d44c1.js";const R={components:{ProductCard:L},data(){return{cantidad:1,cantidad2:1,refrescoSelect:"",polloSelect:"",pollosSelect:["PIERNA","MUSLO","PECHUGA","ALA","otros"],refresco:"",pollo:"",refrescoSelects:["PEPSI","COCA COLA","FANTA","SPRITE","7UP","MIRINDA","GUARANA","JUGO","AGUA","otros"],cantidades:[],search:"",products:[],categories:[],productsAll:[],client:{ci:"",name:""},recibido:"",saleDialog:!1,loading:!1}},created(){for(let i=1;i<=100;i++)this.cantidades.push(i);this.getProducts(),this.getCategories()},methods:{colocarPollo(){this.pollo==null&&(this.pollo=""),this.pollo=this.pollo+" "+this.cantidad+" "+this.polloSelect+",",this.pollo=this.pollo.trim()},colocarRefresco(){this.refresco==null&&(this.refresco=""),this.refresco=this.refresco+" "+this.cantidad+" "+this.refrescoSelect+",",this.refresco=this.refresco.trim()},salePost(){var i;this.loading=!0,this.$axios.post("sales",{client:this.client,products:this.$store.orders,mesa:this.client.mesa,llamada:this.client.llamada,pago:this.client.pago,comment:(this.client.comment==null?"":(i=this.client)==null?void 0:i.comment)+(this.refresco!=""?" Refresco: "+this.refresco:"")+(this.pollo!=""?" Pollo: "+this.pollo:"")}).then(o=>{this.$store.orders=[],this.saleDialog=!1,this.$alert.success("Venta realizada"),N.recibo(o.data)}).catch(o=>{this.$alert.error("Error al realizar la venta")}).finally(()=>{this.loading=!1})},textUpperCase(){this.client.name=this.client.name.toUpperCase()},searchClient(){if(console.log(this.client.ci),this.client.ci===""||this.client.ci===0||this.client.ci===null)return this.client.name="SN",!1;this.client.ci!=null&&this.$axios.get(`searchClient/${this.client.ci}`).then(i=>{var o;this.client.name=(o=i.data)==null?void 0:o.name})},pay(){if(this.$store.orders.length===0)return this.$alert.error("Debe agregar productos al carrito"),!1;this.recibido="",this.saleDialog=!0,this.cantidad=1,this.cantidad1=1,this.refresco="",this.pollo="",this.client={ci:0,name:"SN",mesa:"MESA",pago:"EFECTIVO"}},categoryClick(i){i.id===""?this.products=this.productsAll:this.products=this.productsAll.filter(o=>o.category_id===i.id)},productClick(i){const o=this.$store.orders.find(b=>b.id===i.id);o?o.cantidadSale+=1:this.$store.orders.push({id:i.id,name:i.name,price:i.price,cantidadSale:1})},getCategories(){this.$axios.get("categories").then(i=>{this.categories=i.data})},getProducts(){this.loading=!0,this.$axios.get("listproducts").then(i=>{this.products=i.data,this.productsAll=i.data}).finally(()=>{this.loading=!1})},productFilter(i){i===""?this.products=this.productsAll:this.products=this.productsAll.filter(o=>o.name.toLowerCase().includes(i.toLowerCase()))}},computed:{categoryMoreAll(){return[{id:"",name:"Todo",icon:"fa-solid fa-globe"},...this.categories]}}},q={class:"row"},F={class:"col-12 col-md-8"},T={class:"row"},B={class:"col-12 col-md-4"},O=t("div",{class:"col-12 col-md-2"},null,-1),M=t("div",{class:"col-12 col-md-6 text-right"},null,-1),z={class:"col-12"},G={class:"col-12 col-md-4"},J=t("div",{class:"text-subtitle1 text-bold text-black"}," Carrito ",-1),Y={class:"row"},H={class:"col-12"},W={class:"row"},X={class:"col-6"},Z={class:"col-6"},j={class:"col-12"},K=t("div",{class:"text-bold text-black"}," Total ",-1),$={class:"text-bold text-h5 text-red"},ee={class:"col-12"},le=t("div",{class:"text-h6 text-bold"}," Pago ",-1),oe={class:"text-bold text-center"},se={class:"row"},te={class:"col-12 col-md-4 text-red text-subtitle1 text-bold"},ie={class:"col-12 col-md-4"},de={class:"col-12 col-md-4 text-blue text-subtitle1 text-bold"},ae={key:0},ne={class:"row"},ce={class:"col-12 col-md-2 q-pa-xs"},re={class:"col-12 col-md-3 q-pa-xs"},ue={class:"col-12 col-md-2 q-pa-xs"},me={class:"col-12 col-md-3 q-pa-xs"},pe={class:"col-12 col-md-2 q-pa-xs"},he={class:"col-12"},fe={class:"row"},_e={class:"col-2"},ge={class:"col-3"},Ve={class:"col-7"},be={class:"col-12"},xe={class:"row"},Ce={class:"col-2"},ve={class:"col-3"},Se={class:"col-7"},Ue={class:"col-12 col-md-12 q-pa-xs"},Pe={class:"col-12 col-md-12 flex flex-center"},Ae=t("div",{id:"myelement",class:"hidden"},null,-1);function ke(i,o,b,we,s,n){const U=A("ProductCard");return h(),f(x,null,[l(D,{class:"bg-grey-3 q-pa-xs"},{default:d(()=>[l(_,null,{default:d(()=>[l(r,{class:"q-pa-xs"},{default:d(()=>[t("div",q,[t("div",F,[t("div",T,[t("div",B,[l(c,{modelValue:s.search,"onUpdate:modelValue":[o[0]||(o[0]=e=>s.search=e),n.productFilter],label:"Buscar",outlined:"",dense:"",clearable:"",loading:s.loading},null,8,["modelValue","onUpdate:modelValue","loading"])]),O,M,t("div",z,[l(U,{products:s.products,categories:n.categoryMoreAll,onProductClick:n.productClick,onCategoryClick:n.categoryClick},null,8,["products","categories","onProductClick","onCategoryClick"])])])]),t("div",G,[l(_,null,{default:d(()=>[l(r,{class:"q-pa-xs row items-center bg-yellow"},{default:d(()=>[J,l(g),l(u,{color:"red",label:"Limpiar Carrito",dense:"","no-caps":"",class:"text-bold",size:"10px",icon:"o_delete",onClick:o[1]||(o[1]=e=>i.$store.orders=[]),loading:s.loading},null,8,["loading"])]),_:1}),l(r,{class:"q-pa-xs"},{default:d(()=>[t("div",Y,[t("div",H,[l(I,{bordered:"",dense:""},{default:d(()=>[(h(!0),f(x,null,w(i.$store.orders,e=>(h(),Q(E,{key:e.id},{default:d(()=>[l(S,null,{default:d(()=>[l(V,{class:"text-bold"},{default:d(()=>[C(p(e.name),1)]),_:2},1024),l(V,{caption:""},{default:d(()=>[t("div",W,[t("div",X,[l(c,{modelValue:e.price,"onUpdate:modelValue":a=>e.price=a,dense:"",outlined:"",type:"number",step:"0.01"},{prepend:d(()=>[l(v,{name:"fa-solid fa-dollar-sign",size:"10px"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),t("div",Z,[l(c,{modelValue:e.cantidadSale,"onUpdate:modelValue":a=>e.cantidadSale=a,dense:"",outlined:"",type:"number"},{prepend:d(()=>[l(v,{name:"fa-solid fa-shopping-cart",size:"10px"})]),_:2},1032,["modelValue","onUpdate:modelValue"])])])]),_:2},1024)]),_:2},1024),l(S,{class:"text-right",side:""},{default:d(()=>[l(V,{class:"text-red text-bold text-h6"},{default:d(()=>[C(p((e.price*e.cantidadSale).toFixed(2))+" ",1),l(u,{dense:"",flat:"",rounded:"",icon:"delete",size:"10px",color:"red",onClick:a=>i.$store.orders.splice(i.$store.orders.indexOf(e),1)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),t("div",j,[l(r,{class:"q-pa-xs row items-center"},{default:d(()=>[K,l(g),t("div",$,p(i.$store.orders.reduce((e,a)=>e+a.price*a.cantidadSale,0).toFixed(2))+" Bs ",1)]),_:1})]),t("div",ee,[l(r,{class:"q-pa-xs"},{default:d(()=>[l(u,{color:"indigo",label:"Pagar",dense:"","no-caps":"",class:"full-width text-bold",size:"lg",icon:"shopping_cart",onClick:n.pay,loading:s.loading},null,8,["onClick","loading"])]),_:1})])])]),_:1})]),_:1})])])]),_:1})]),_:1})]),_:1}),l(k,{modelValue:s.saleDialog,"onUpdate:modelValue":o[16]||(o[16]=e=>s.saleDialog=e),persistent:""},{default:d(()=>[l(_,{style:{width:"850px","max-width":"90vh"}},{default:d(()=>[l(r,{class:"q-pa-xs row items-center"},{default:d(()=>[le,l(g),l(u,{flat:"",dense:"",icon:"close",onClick:o[2]||(o[2]=e=>s.saleDialog=!1)})]),_:1}),l(r,{class:""},{default:d(()=>[t("div",oe,[t("div",se,[t("div",te," Total :"+p(i.$store.orders.reduce((e,a)=>e+a.price*a.cantidadSale,0).toFixed(2))+" Bs ",1),t("div",ie,[l(c,{modelValue:s.recibido,"onUpdate:modelValue":o[3]||(o[3]=e=>s.recibido=e),label:"Monto recibido",outlined:"",dense:"",clearable:""},null,8,["modelValue"])]),t("div",de,[s.recibido!==""?(h(),f("div",ae," Cambio :"+p((s.recibido-i.$store.orders.reduce((e,a)=>e+a.price*a.cantidadSale,0)).toFixed(2))+" Bs ",1)):y("",!0)])])])]),_:1}),l(r,null,{default:d(()=>[t("div",ne,[t("div",ce,[l(c,{modelValue:s.client.ci,"onUpdate:modelValue":[o[4]||(o[4]=e=>s.client.ci=e),n.searchClient],label:"Numero",outlined:"",dense:"",clearable:"",debounce:"300"},null,8,["modelValue","onUpdate:modelValue"])]),t("div",re,[l(c,{modelValue:s.client.name,"onUpdate:modelValue":[o[5]||(o[5]=e=>s.client.name=e),n.textUpperCase],label:"Nombre",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"])]),t("div",ue,[l(m,{modelValue:s.client.mesa,"onUpdate:modelValue":o[6]||(o[6]=e=>s.client.mesa=e),label:"Mesa",outlined:"",dense:"",options:["MESA","LLEVAR","DELIVERY","PEDIDOS YA"]},null,8,["modelValue"])]),t("div",me,[l(m,{modelValue:s.client.pago,"onUpdate:modelValue":o[7]||(o[7]=e=>s.client.pago=e),label:"Pago",outlined:"",dense:"",options:["EFECTIVO","TARJETA","ONLINE","QR"]},null,8,["modelValue"])]),t("div",pe,[l(m,{modelValue:s.client.llamada,"onUpdate:modelValue":o[8]||(o[8]=e=>s.client.llamada=e),label:"Llamada",outlined:"",dense:"",options:s.cantidades,rules:[e=>e>0||"Debe seleccionar una cantidad"]},null,8,["modelValue","options","rules"])]),t("div",he,[t("div",fe,[t("div",_e,[l(m,{modelValue:s.cantidad,"onUpdate:modelValue":o[9]||(o[9]=e=>s.cantidad=e),label:"Cantidad",outlined:"",dense:"",options:s.cantidades},null,8,["modelValue","options"])]),t("div",ge,[l(m,{modelValue:s.refrescoSelect,"onUpdate:modelValue":o[10]||(o[10]=e=>s.refrescoSelect=e),label:"Refresco",outlined:"",dense:"",options:s.refrescoSelects},{after:d(()=>[l(u,{color:"green",dense:"",rounded:"",icon:"add",onClick:n.colocarRefresco},null,8,["onClick"])]),_:1},8,["modelValue","options"])]),t("div",Ve,[l(c,{modelValue:s.refresco,"onUpdate:modelValue":o[11]||(o[11]=e=>s.refresco=e),label:"Refresco",outlined:"",dense:"",clearable:""},null,8,["modelValue"])])])]),t("div",be,[t("div",xe,[t("div",Ce,[l(m,{modelValue:s.cantidad2,"onUpdate:modelValue":o[12]||(o[12]=e=>s.cantidad2=e),label:"Cantidad",outlined:"",dense:"",options:s.cantidades},null,8,["modelValue","options"])]),t("div",ve,[l(m,{modelValue:s.polloSelect,"onUpdate:modelValue":o[13]||(o[13]=e=>s.polloSelect=e),label:"Pollo",outlined:"",dense:"",options:s.pollosSelect},{after:d(()=>[l(u,{color:"green",dense:"",rounded:"",icon:"add",onClick:n.colocarPollo},null,8,["onClick"])]),_:1},8,["modelValue","options"])]),t("div",Se,[l(c,{modelValue:s.pollo,"onUpdate:modelValue":o[14]||(o[14]=e=>s.pollo=e),label:"Pollo",outlined:"",dense:"",clearable:""},null,8,["modelValue"])])])]),t("div",Ue,[l(c,{modelValue:s.client.comment,"onUpdate:modelValue":o[15]||(o[15]=e=>s.client.comment=e),label:"Comentario",outlined:"",dense:""},null,8,["modelValue"])]),t("div",Pe,[l(u,{color:"red-8",label:"Pagar",dense:"","no-caps":"",class:"text-bold full-width",icon:"shopping_cart",onClick:n.salePost,loading:s.loading},null,8,["onClick","loading"])])])]),_:1})]),_:1})]),_:1},8,["modelValue"]),Ae],64)}var Be=P(R,[["render",ke]]);export{Be as default};
